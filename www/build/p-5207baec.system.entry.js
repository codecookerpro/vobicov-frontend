System.register(["./p-7f8680f3.system.js","./p-cc411d04.system.js","./p-6e40ec41.system.js","./p-49989aaa.system.js","./p-6c45f801.system.js","./p-358c43b4.system.js","./p-7601a917.system.js","./p-2dd1f1c5.system.js","./p-ada3d1a3.system.js"],(function(t){"use strict";var e,a,r,n,o,i,s,c,u,l,p,d,h;return{setters:[function(t){e=t.h;a=t.r;r=t.c},function(){},function(){},function(t){n=t.a},function(t){o=t.L;i=t.R},function(){},function(t){s=t.Q},function(t){c=t.v},function(t){u=t.u;l=t.c;p=t.a;d=t.g;h=t.b}],execute:function(){var f=function(){return e("div",null,e("d4l-date-input",{"data-test":"questionnaireDateInputs",label:n.t("input_date_label"),errorMessage:n.t("input_date_error"),fields:{day:{label:""+n.t("input_date_label_day"),placeholder:""+n.t("input_date_placeholder_day")},month:{label:""+n.t("input_date_label_month"),placeholder:""+n.t("input_date_placeholder_month")},year:{label:""+n.t("input_date_label_year"),placeholder:""+n.t("input_date_placeholder_year")}},futureAllowed:false}),e("div",{class:"input-date__help"},n.t("input_date_help")))};var g=".questionnaire__content{min-height:15em}.questionnaire__content fieldset{border:0;margin:0;padding:0}.questionnaire input[type='radio']+label::before{border-color:var(--c-gray) !important}.questionnaire input[type='radio']:checked+label::after{background-color:var(--c-gray) !important}d4l-button .button.sc-d4l-button:disabled{background-color:var(--c-gray-lighter);border-color:var(--c-gray-lighter)}";var m=t("ia_questionnaire",function(){function t(t){var e=this;a(this,t);this.currentStep=0;this.answerData={};this.scoreData={};this.setLocalStorageAnswers=function(){localStorage.setItem(o.ANSWERS,JSON.stringify(e.answerData));localStorage.setItem(o.SCORES,JSON.stringify(e.scoreData));localStorage.setItem(o.COMPLETED,"false");c.set()};this.moveToNextStep=function(){var t=e.answerData[s[e.currentStep].id];e.scoreData=u(e.currentStep,t,e.scoreData);e.setLocalStorageAnswers();if(!e.checkFinished()){e.currentStep=l(e.currentStep,t);var a=e.currentStep;e.currentStep=p(e.currentStep,e.scoreData,e.answerData);if(a!==e.currentStep){e.checkFinished();return}e.trackStepMove(false)}};this.checkFinished=function(){if(e.currentStep>=s.length-1){e.history.push(i.SUMMARY,{});return true}return false};this.moveToPreviousStep=function(){if(e.currentStep===0){e.history.push("/",{});localStorage.removeItem(o.ANSWERS)}else{var t=JSON.parse(localStorage.getItem(o.ANSWERS));if(e.answerData&&t){var a=Object.keys(t);var r=a[a.length-1];var n=s[h(r)];if(n.scoreMap){var i=t[r];e.scoreData[n.category]-=d(n,i)}delete t[r];e.answerData=t;e.setLocalStorageAnswers();e.currentStep=r?h(r):0}else{e.currentStep--}e.trackStepMove(true)}};this.submitForm=function(t){var a;t.preventDefault();(a=t.target.querySelector("input"))===null||a===void 0?void 0:a.focus();e.moveToNextStep()};this.componentWillLoad=function(){e.showLogoHeader.emit({show:false});if(!c.match()){c.reset()}var t=JSON.parse(localStorage.getItem(o.ANSWERS));var a=JSON.parse(localStorage.getItem(o.SCORES));e.answerData=t?t:{};e.scoreData=a?a:{};var r=Object.keys(e.answerData);if(r.length){e.currentStep=h(r[r.length-1]);e.moveToNextStep()}};this.showLogoHeader=r(this,"showLogoHeader",7)}t.prototype.changedLanguageHandler=function(t){this.language=t.detail.code};t.prototype.handlePopStateChange=function(){if(this.currentStep>0){this.history.push(i.QUESTIONNAIRE,{});this.moveToPreviousStep()}};t.prototype.updateFormDataHandler=function(t){var e=t.detail;this.setFormData(e.key,e.value)};t.prototype.dateChangeHandler=function(t){var e=this.currentStep;var a=t.detail.value;this.setFormData(s[e].id,a.split("-").join("."))};t.prototype.setFormData=function(t,e){var a;this.answerData=Object.assign(Object.assign({},this.answerData),(a={},a[t]=e,a))};Object.defineProperty(t.prototype,"progress",{get:function(){return Math.floor((this.currentStep+1)/s.length*100)},enumerable:true,configurable:true});t.prototype.trackStepMove=function(t){};t.prototype.render=function(){var t=this;var a=this,r=a.submitForm,o=a.currentStep,i=a.moveToPreviousStep,c=a.progress;return o<s.length&&e("div",{class:"questionnaire c-card-wrapper"},e("form",{onSubmit:function(t){return r(t)},ref:function(e){return t.formElement=e},"data-test":"questionnaireForm"},e("d4l-card",{classes:"card--desktop card--text-center"},e("div",{class:"u-margin-horizontal--card-negative",slot:"card-header"},e("ia-navigation-header",{headline:n.t(s[o].text),handleClick:function(){return i()}}),e("d4l-linear-progress",{"data-test":"progressBar",value:c})),e("div",{class:"questionnaire__content u-padding-vertical--medium u-text-align--left",slot:"card-content"},e("fieldset",null,e("legend",{class:"u-visually-hidden"},n.t(s[o].text)),s[o].comment&&e("p",{class:"questionnaire__comment",innerHTML:""+n.t(s[o].comment)}),e("div",{class:"questionnaire__form u-padding-vertical--normal "},s[o].inputType==="radio"&&e("ia-input-radio",{"data-test":"questionnaireRadioInputs",question:s[o],currentSelection:this.answerData[s[o].id]}),s[o].inputType==="checkbox"&&e("ia-input-multiple-choice",{question:s[o]}),s[o].inputType==="date"&&e(f,null),s[o].inputType==="postal"&&e("ia-input-postal-code",{question:s[o]})))),e("div",{slot:"card-footer"},e("d4l-button",{classes:"button--block","data-test":"continueButton",text:o===s.length-1?n.t("questionnaire_button_generate_qr"):n.t("questionnaire_button_next")})))))};return t}());m.style=g}}}));