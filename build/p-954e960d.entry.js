import{r as t,h as s}from"./p-f64a55b6.js";import{K as e}from"./p-8f46979b.js";const n=class{constructor(s){t(this,s),this.classes="",this.label="",this.value="",this.focused=!1,this.ariaLabelSearch="Search",this.showCancelBtn=!!this.value,this.onInput=this.onInput.bind(this),this.onKeyUp=this.onKeyUp.bind(this),this.onButtonClick=this.onButtonClick.bind(this),this.cancelSearch=this.cancelSearch.bind(this)}async getQuery(){const{value:t=""}=this.inputElement||{};return this.getQueryByValue(t)}async cancelSearch(){const t=this.inputElement;t.value?t.focus&&t.focus():t.blur&&t.blur(),t.value="",this.triggerInput(t)}get inputElement(){return this.d4lInputElement?this.d4lInputElement.querySelector("input"):null}getQueryByValue(t){return t.split(/\s/).map(t=>t.toLowerCase()).filter(t=>t)}triggerInput(t){this.onInput(Object.assign(Object.assign({},new Event("input",{bubbles:!0,cancelable:!0})),{target:t}))}onInput(t){const{target:{value:s}}=t;t.query=this.getQueryByValue(s),this.showCancelBtn=!!s,this.handleInput&&this.handleInput(t)}onKeyUp(t){const{target:s}=t;e.isEsc(t)&&this.cancelSearch(),e.isEnter(t)&&s.value&&(t.query=this.getQueryByValue(s.value),this.handleSearch&&this.handleSearch(t),s.blur&&s.blur())}async onButtonClick(t){t.query=await this.getQuery(),this.handleSearch&&this.handleSearch(t)}render(){const{classes:t,label:e,value:n,focused:a,onInput:i,onKeyUp:c,onButtonClick:o,cancelSearch:l,handleFocus:r,handleBlur:h,showCancelBtn:u}=this;return s("div",{class:`search ${t}`},s("button",{class:"search__button search__button--search",type:"button","aria-label":this.ariaLabelSearch,title:"Search"!==this.ariaLabelSearch?this.ariaLabelSearch:null,onClick:o},s("d4l-icon-search",{classes:"icon--extra-small"})),s("d4l-input",{class:"search__input",classes:"input--round input--icons",type:"text",value:n,autocomplete:"off",autocapitalize:"none",focused:a,label:e,handleInput:i,handleKeyUp:c,handleFocus:r,handleBlur:h,ref:t=>this.d4lInputElement=t}),s("button",{class:`search__button search__button--cancel ${u?"":"search__button--hidden"}`,type:"button",onClick:l},s("d4l-icon-close",{classes:"icon--extra-small"})))}};n.style=".search.sc-d4l-search{position:relative;display:-ms-flexbox;display:flex;-ms-flex-flow:row nowrap;flex-flow:row nowrap;width:100%;position:relative;-ms-flex-align:center;align-items:center}.search__input.sc-d4l-search{display:block;-ms-flex:1;flex:1}.search__button.sc-d4l-search{position:absolute;bottom:0;display:block;-ms-flex:none;flex:none;background:transparent;border:0 none;padding:9px;cursor:pointer;color:var(--c-primary);opacity:1;-webkit-transition:opacity 0.2s ease-in-out;transition:opacity 0.2s ease-in-out;z-index:1}.search__button--search.sc-d4l-search{left:0}.search__button--cancel.sc-d4l-search{right:0;color:var(--c-scorpion)}.search__button--hidden.sc-d4l-search{opacity:0;pointer-events:none}";export{n as d4l_search}