import{r as t,h as i}from"./p-f64a55b6.js";const s=class{constructor(i){t(this,i),this.step=1,this.scale=!1,this.focused=!1,this.dragging=!1,this.startDrag=this.startDrag.bind(this),this.drag=this.drag.bind(this),this.endDrag=this.endDrag.bind(this),this.point=this.point.bind(this),this.onInputChange=this.onInputChange.bind(this)}get steps(){const{min:t,max:i,step:s}=this;return parseInt(((i-t)/s).toFixed(0))+1}get values(){const{min:t,step:i,steps:s}=this;return new Array(s).fill(null).map((s,e)=>parseFloat((e*i+t).toFixed(1)))}get scaleEl(){const{scale:t,values:s}=this;if(!t)return null;const e=s.length;return i("legend",{class:"slider-input__scale"},s.map((t,s)=>i("div",null,i("span",{class:"slider-input__scale-marker",key:s,style:{left:`${s/(e-1)*100}%`}}),i("span",{class:"slider-input__scale-value",style:{left:`${s/(e-1)*100}%`}},t))))}get knobPosition(){const t=this.values.indexOf(this.inputValue);return-1===t?null:`${t/(this.steps-1)*100}%`}get inputStartingValue(){return String(this.values.slice(0,2).slice(-1).pop())}get isPristine(){return!this.values.includes(this.inputValue)}getX(t){const i="changedTouches"in t?t.changedTouches[0]:t,{clientX:s}=i||{};return s}startDrag(t){t.stopPropagation(),t.preventDefault();const{left:i,right:s}=this.sliderInnerEl.getBoundingClientRect();this.xStepWidth=(s-i)/(this.steps-1),this.xStart=i,document.addEventListener("mouseup",this.endDrag),document.addEventListener("touchend",this.endDrag),document.addEventListener("mousemove",this.drag),document.addEventListener("touchmove",this.drag),this.dragging=!0}drag(t){t.preventDefault();const{xStart:i,xStepWidth:s,steps:e}=this,n=this.getX(t),r=Math.min(Math.max(Math.round((n-i)/s),0),e-1);this.values[r]!==this.inputValue&&(this.inputValue=this.values[r],this.sliderInputEl.value=String(this.inputValue),this.sliderInputEl.dispatchEvent(new Event("change")))}endDrag(t){t.preventDefault(),document.removeEventListener("mouseup",this.endDrag),document.removeEventListener("touchend",this.endDrag),document.removeEventListener("mousemove",this.drag),document.removeEventListener("touchmove",this.drag),this.dragging=!1,setTimeout(()=>this.sliderInputEl.blur(),0)}point(t){this.startDrag(t),this.drag(t)}onInputChange(t){const i=t.target,s=parseFloat(i.value);this.inputValue!==s&&(this.inputValue=s),this.handleChange&&this.handleChange(Object.assign(Object.assign({},t),{target:Object.assign(Object.assign({},i),{value:s})}))}componentWillLoad(){this.min=parseFloat(this.min.toFixed(1)),this.max=parseFloat(this.max.toFixed(1)),this.step=parseFloat(this.step.toFixed(1));const{min:t,max:i,step:s,value:e}=this;if(parseFloat((10*(i-t)).toFixed(1))%(10*s))throw new Error(`slider-input error: range of min ${t} and max ${i} is not divisible by step ${s}`);this.inputValue=e}render(){const{min:t,max:s,step:e,steps:n,scale:r,scaleEl:o,dragging:l,isPristine:a,knobPosition:p,inputStartingValue:d,inputValue:u,focused:c}=this;return i("label",{class:{"slider-input":!0,"slider-input--focused":c,"slider-input--scale":r},style:{minWidth:`${20*n}px`}},i("div",{class:"slider-input__inner",ref:t=>this.sliderInnerEl=t,onMouseDown:this.point,onTouchStart:this.point},o,i("span",{class:{"slider-input__knob":!0,"slider-input__knob--dragging":l,"slider-input__knob--pristine":a},onMouseDown:this.startDrag,onTouchStart:this.startDrag,style:{left:p}}),i("input",{ref:t=>this.sliderInputEl=t,class:"slider-input__input",type:"range",min:t,max:s,step:e,value:a?d:u,onChange:this.onInputChange,onFocus:()=>this.focused=!0,onBlur:()=>this.focused=!1})))}};s.style="@-webkit-keyframes slider_knob_pristine{0%{opacity:0;left:10%}25%{opacity:1}50%{opacity:0;left:90%}75%{opacity:1}100%{opacity:0;left:10%}}@keyframes slider_knob_pristine{0%{opacity:0;left:10%}25%{opacity:1}50%{opacity:0;left:90%}75%{opacity:1}100%{opacity:0;left:10%}}.slider-input.sc-d4l-slider-input{display:block;height:20px;padding:0 10px;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;cursor:pointer}.slider-input--scale.sc-d4l-slider-input{margin-bottom:32px}.slider-input__inner.sc-d4l-slider-input{position:relative;height:100%}.slider-input__inner.sc-d4l-slider-input::before{content:'';display:block;position:absolute;height:2px;left:0;width:100%;top:50%;margin-top:-1px;background:var(--c-navy-blue--darken);z-index:0}.slider-input__knob.sc-d4l-slider-input{position:relative;display:block;width:20px;height:20px;border-radius:50%;margin-left:-10px;cursor:pointer;background:var(--c-navy-blue);-webkit-transition:left 0.15s ease-out;transition:left 0.15s ease-out;will-change:left, opacity;z-index:2}.slider-input__knob.sc-d4l-slider-input::before,.slider-input__knob.sc-d4l-slider-input::after{content:'';position:absolute;display:block;border:1px solid transparent;border-radius:50%;pointer-events:none;background-color:transparent;-webkit-transition:border-color 0.1s linear, background-color 0.1s linear;transition:border-color 0.1s linear, background-color 0.1s linear}.slider-input__knob.sc-d4l-slider-input::before{width:16px;height:16px;left:2px;top:2px}.slider-input__knob.sc-d4l-slider-input::after{width:6px;height:6px;left:7px;top:7px}.slider-input__knob.sc-d4l-slider-input:hover::before,.slider-input--focused.sc-d4l-slider-input .slider-input__knob.sc-d4l-slider-input::before,.slider-input__knob--dragging.sc-d4l-slider-input::before{border-color:#fff}.slider-input__knob--dragging.sc-d4l-slider-input::after{background-color:#fff}.slider-input__knob--pristine.sc-d4l-slider-input{-webkit-animation:slider_knob_pristine 8s ease-in-out infinite;animation:slider_knob_pristine 8s ease-in-out infinite}.slider-input__input.sc-d4l-slider-input{top:0;position:absolute;opacity:0;pointer-events:none}.slider-input__scale.sc-d4l-slider-input{position:absolute;height:10px;left:0;width:100%;top:50%;padding:0;margin:-5px 0 0;overflow:visible;z-index:1}.slider-input__scale-marker.sc-d4l-slider-input{position:absolute;display:block;width:2px;height:100%;margin-left:-1px;background:var(--c-navy-blue--darken)}.slider-input__scale-value.sc-d4l-slider-input{position:absolute;display:block;font-size:10px;margin-top:1rem;top:100%;-webkit-transform:translateX(-50%);transform:translateX(-50%);color:var(--c-scorpion)}";export{s as d4l_slider_input}