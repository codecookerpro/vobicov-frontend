import{h as t,r as e,c as r}from"./p-f64a55b6.js";import{W as s,e as i}from"./p-c50318f7.js";import"./p-750b86e2.js";import{a}from"./p-ebd93abc.js";import{R as n,L as o,T as l,M as d}from"./p-5aac379d.js";import{d as m}from"./p-f73d3317.js";import"./p-f1d9a138.js";import{C as c,a as h}from"./p-4cd42235.js";import{v as g}from"./p-d692fd31.js";const _=t=>`0${t}`.slice(-2),p=({livingSituation:e,workspace:r,caringForRelatives:s})=>t("div",{class:"summary__risk-spreading"},t("h3",null,a.t("risk_spreading_headline")),!e&&t("div",{"data-test":"riskLivingAlone"},t("h4",null,a.t("risk_spreading_living_alone_headline")),t("div",{innerHTML:a.t("risk_spreading_living_alone")})),1===e&&t("div",{"data-test":"riskLivingTogether"},t("h4",null,a.t("risk_spreading_living_together_headline")),t("div",{innerHTML:a.t("risk_spreading_living_together")})),!r&&t("div",{"data-test":"riskMedicalWorkspace"},t("h4",null,a.t("risk_spreading_workspace_medical_headline")),t("div",{innerHTML:a.t("risk_spreading_workspace_medical")})),s&&t("div",{"data-test":"riskCaringForRelatives"},t("h4",null,a.t("risk_spreading_caring_for_relatives_headline")),t("div",{innerHTML:a.t("risk_spreading_caring_for_relatives")})),t("div",{"data-test":"riskGeneralNotes"},t("h4",null,a.t("risk_spreading_paragraphs_headline")),t("div",{innerHTML:a.t("risk_spreading_paragraphs")}))),u=({ageAboveSixtyFive:e})=>t("div",{class:"summary__risk-very-ill"},t("d4l-alert",{type:"error"},!e&&t("div",{innerHTML:a.t("risk_very_ill_below_sixty_five"),"data-test":"riskBelow65"}),e&&t("div",{innerHTML:a.t("risk_very_ill_above_sixty_five"),"data-test":"riskAbove65"}))),v=class{constructor(t){e(this,t),this.answers={},this.scores={},this.resultCase=5,this.snippetsAnswers={outOfBreath:!1,ageAboveSixtyFive:!1,livingSituation:0,workspace:0,caringForRelatives:!1},this.resetFormAndStartAgain=()=>{g.reset(),this.history.push(n.QUESTIONNAIRE,{})},this.setResultCase=()=>{const t=this.scores,e=t[c.SYMPTOMS]>0||t[c.SYMPTOMS_HIGH]>0,r=t[c.SYMPTOMS_HIGH]>0;this.resultCase=t[c.CONTACT]>0?e?this.symptomsWithinTwoWeeksOfContact?1:r?2:4:this.contactWithinTwoWeeks?3:5:e?r?2:4:5},this.setSnippetState=()=>{this.answers&&(this.snippetsAnswers.outOfBreath=0===parseInt(this.answers[h.OUT_OF_BREATH],10),this.snippetsAnswers.ageAboveSixtyFive=parseInt(this.answers[h.AGE],10)>3||0===parseInt(this.answers[h.ABOVE_65],10),this.snippetsAnswers.livingSituation=parseInt(this.answers[h.HOUSING],10),this.snippetsAnswers.workspace=parseInt(this.answers[h.WORKSPACE],10),this.snippetsAnswers.caringForRelatives=0===parseInt(this.answers[h.CARING],10))},this.componentWillLoad=()=>{if(this.showLogoHeader.emit({show:!1}),!g.match())return void this.resetFormAndStartAgain();const t=JSON.parse(localStorage.getItem(o.ANSWERS));this.answers=t||{};const e=JSON.parse(localStorage.getItem(o.SCORES));this.scores=e||{},this.setResultCase(),this.setSnippetState(),localStorage.setItem(o.COMPLETED,"true")},this.showLogoHeader=r(this,"showLogoHeader",7)}changedLanguageHandler(t){this.language=t.detail.code}handlePopStateChange(){const t=Object.keys(this.answers);delete this.answers[t[t.length-1]],localStorage.setItem(o.ANSWERS,JSON.stringify(this.answers)),localStorage.setItem(o.COMPLETED,"false")}get currentLanguage(){return this.language||"en"}get symptomsWithinTwoWeeksOfContact(){const t=this.answers[h.CONTACT_DATE],e=this.answers[h.SYMPTOM_DATE];if(t&&e){let r=new Date(t.split(".").join("-")).getTime();return new Date(e.split(".").join("-")).getTime()-r<=l}return!1}get contactWithinTwoWeeks(){const t=this.answers[h.CONTACT_DATE];if(t){const e=new Date(t.split(".").join("-")).getTime(),r=(()=>{const t=(new Date).getFullYear(),e=(new Date).getMonth()+1,r=(new Date).getDate();let s=`${t}-${_(e)}-${_(r)}`;return new Date(s).getTime()})();return r>=e&&r-e<=l}return!1}get isFromData4Life(){const t=localStorage.getItem(o.SOURCE);return!!t&&(s.includes(t)||!!d[t])}get completedExport(){return"true"===localStorage.getItem(o.EXPORTED)}render(){const{resetFormAndStartAgain:e,answers:r,resultCase:s,snippetsAnswers:n,isFromData4Life:o,completedExport:l}=this;return t("div",{class:"c-card-wrapper summary"},t("d4l-card",{classes:"card--desktop"},t("div",{class:"summary__content",slot:"card-content"},t("h2",null,a.t("summary_headline")),[1,2,4].indexOf(s)>-1&&t("span",null,n.outOfBreath&&t(u,{ageAboveSixtyFive:n.ageAboveSixtyFive})),t("ia-recommendation",{resultCase:s}),5!==s&&t(p,{livingSituation:n.livingSituation,workspace:n.workspace,caringForRelatives:n.caringForRelatives}))),!l&&m&&i&&t("ia-data4life",{long:!o}),t("d4l-card",{classes:"card--desktop summary__content"},t("div",{slot:"card-content"},t("ia-qr-code",{answers:r,resultCase:s})),t("div",{class:"summary__footer",slot:"card-footer"},t("h3",null,a.t("summary_reset_headline")),t("d4l-button",{type:"button",classes:"button--block button--secondary ","data-test":"continueButton",text:a.t("summary_reset_button"),handleClick:()=>{e()}}))))}};v.style=".summary>*>*{margin:1em 0}.summary h2{font-size:1.625rem;text-align:center;font-weight:500;margin-top:2rem;margin-bottom:1.5rem;color:var(--c-primary)}.summary h3{font-size:1.25rem;font-weight:500;margin-top:2.5rem;margin-bottom:1.5rem;color:var(--c-primary)}.summary h4{font-weight:500;margin-bottom:0.5rem;color:var(--c-gray)}.summary__risk-very-ill{margin-bottom:2.5rem}.summary__footer{margin-bottom:2rem}";export{v as ia_summary}